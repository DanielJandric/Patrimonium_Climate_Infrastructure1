<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patrimonium PCIOF I - Q4 2024 Performance Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4">
            <h1 class="text-xl sm:text-2xl font-bold text-gray-800">Patrimonium PCIOF I - Q4 2024 Performance Dashboard</h1>
            <p class="text-sm text-gray-600 mt-1">Climate Infrastructure Opportunity Fund Performance Report</p>
        </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6">
            <div class="flex space-x-8">
                <button class="tab-button active" data-tab="performance" id="tab-performance">
                    <span class="tab-text">Aperçu de la Performance</span>
                </button>
                <button class="tab-button" data-tab="portfolio" id="tab-portfolio">
                    <span class="tab-text">Portefeuille & Analyse IA</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Dashboard -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:
py-8">
        <!-- Performance Overview Tab -->
        <div id="tab-content-performance" class="tab-content active">
            <section class="mb-8">
                <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-6">Indicateurs Clés de Performance (KPIs)</h2>
                <div id="kpiContainer">
                     <!-- FIXED: KPI cards will be populated by JavaScript - no longer empty -->
                </div>
            </section>

            <!-- CORRECTED: Stéphane Bonvin Individual Section - Now properly structured -->
            <section class="mb-8">
                <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-6">Performance Individuelle - Stéphane Bonvin</h2>
                <div id="stephaneBovinSection" class="bonvin-section">
                    <!-- FIXED: Stéphane Bonvin data will be populated by JavaScript - no longer empty -->
                </div>
            </section>

            <section class="mb-8">
                 <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-6">Déploiement du Capital</h2>
                 <div class="deployment-progress">
                    <h3 class="text-md font-semibold text-gray-700 mb-2">Capital Investi / Appelé</h3>
                    <p class="text-sm text-gray-600 mb-2">82.2 M€ appelés / 121 M€ engagés (~68% investi)</p>
                     <div class="progress-bar">
                         <div class="progress-fill invested" style="width: 68%;"></div>
                     </div>
                 </div>
                 <div class="deployment-progress">
                     <h3 class="text-md font-semibold text-gray-700 mb-2">Capital Disponible pour Investissement</h3>
                     <p class="text-sm text-gray-600 mb-2">~39 M€ restants (~32% disponible)</p>
                     <div class="progress-bar">
                         <div class="progress-fill" style="width: 32%;"></div>
                     </div>
                 </div>
            </section>

             <section class="mb-8">
                <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-6">Faits Marquants Qualitatifs (Q4 2024)</h2>
                <div id="qualitativeHighlights" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- FIXED: Qualitative highlights will be populated by JavaScript - no longer empty -->
                </div>
            </section>

            <section class="mb-8">
                <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-6">Tendances de Performance Historique</h2>
                <div class="grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8">
                    <section class="chart-container">
                         <h3 class="text-md font-semibold text-gray-700 mb-4">Évolution de la NAV (en M€)</h3>
                        <div class="chart-wrapper">
                            <canvas id="navChart" width="400" height="250"></canvas>
                        </div>
                    </section>
                     <section class="chart-container">
                         <h3 class="text-md font-semibold text-gray-700 mb-4">Tendances TVPI et RVPI</h3>
                         <div class="chart-wrapper">
                            <canvas id="tvpiChart" width="400" height="250"></canvas>
                         </div>
                    </section>
                     <section class="chart-container">
                         <h3 class="text-md font-semibold text-gray-700 mb-4">IRR Net (%)</h3>
                        <div class="chart-wrapper">
                            <canvas id="irrChart" width="400" height="250"></canvas>
                        </div>
                    </section>
                    <section class="chart-container">
                         <h3 class="text-md font-semibold text-gray-700 mb-4">Flux de Capital Cumulés (en M€)</h3>
                         <div class="chart-wrapper">
                             <canvas id="cumulativeFlowsChart" width="400" height="250"></canvas>
                         </div>
                    </section>
                </div>
            </section>

            <section class="mb-8">
                <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-6">Diversification du Portefeuille</h2>
                 <div class="grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8">
                     <section class="chart-container">
                         <h3 class="text-md font-semibold text-gray-700 mb-4">Répartition Géographique</h3>
                         <div class="chart-wrapper">
                            <canvas id="geoChart" width="400" height="250"></canvas>
                         </div>
                     </section>
                      <section class="chart-container">
                         <h3 class="text-md font-semibold text-gray-700 mb-4">Répartition Sectorielle</h3>
                         <div class="chart-wrapper">
                            <canvas id="sectorChart" width="400" height="250"></canvas>
                         </div>
                     </section>
                 </div>
            </section>

             <section class="mb-8">
                 <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-6">Flux de Trésorerie Récent (Q4 2024 Exemples)</h2>
                 <div class="chart-container">
                     <div class="chart-wrapper" style="height: 180px;">
                         <canvas id="cashFlowChart" width="400" height="180"></canvas>
                     </div>
                 </div>
             </section>
        </div>

        <!-- CORRECTED: Portfolio & AI Analysis Tab - Now fully functional -->
        <div id="tab-content-portfolio" class="tab-content">
            <section class="mb-8">
                <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-6">Portfolio Companies & AI Impact Analysis</h2>
                <p class="text-sm text-gray-600 mb-6">Analyse de l'exposition et des liens avec l'Intelligence Artificielle pour les principales participations du portefeuille PCIOF I.</p>

                <!-- AI Analysis Introduction -->
                <div class="ai-intro-section mb-8">
                    <div class="ai-intro-card">
                        <h3 class="ai-intro-title">Contexte de l'Analyse IA</h3>
                        <p class="ai-intro-text">
                            L'Intelligence Artificielle transforme l'infrastructure mondiale, créant une demande sans précédent pour les centres de données, l'énergie et la connectivité.
                            Cette analyse évalue l'exposition directe et indirecte du portefeuille PCIOF I aux tendances IA, identifiant les sociétés positionnées comme
                            <strong>enablers</strong> (facilitateurs) de la révolution IA ou utilisant l'IA pour optimiser leurs opérations.
                        </p>
                        <p class="ai-intro-text">
                            Les catégories d'exposition incluent : <strong>Élevée</strong> (infrastructure critique IA, demande hyperscale directe),
                            <strong>Modérée</strong> (utilisation opérationnelle IA, stratégies d'investissement liées), et <strong>Limitée</strong> (liens sectoriels indirects).
                        </p>
                    </div>
                </div>

                <!-- FIXED: AI Analysis Summary Cards - Now populated with real data -->
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8">
                    <div class="ai-summary-card high-ai">
                        <div class="ai-summary-label">Exposition IA Élevée</div>
                        <div class="ai-summary-value">3</div>
                        <div class="ai-summary-context">participations</div>
                    </div>
                    <div class="ai-summary-card medium-ai">
                        <div class="ai-summary-label">Exposition IA Modérée</div>
                        <div class="ai-summary-value">1</div>
                        <div class="ai-summary-context">participations</div>
                    </div>
                    <div class="ai-summary-card low-ai">
                        <div class="ai-summary-label">Exposition IA Limitée</div>
                        <div class="ai-summary-value">7</div>
                        <div class="ai-summary-context">participations</div>
                    </div>
                </div>

                 <!-- Filter/Search input -->
                 <div class="mb-6">
                     <input type="text" id="portfolioFilterInput" placeholder="Rechercher par nom, type, ou analyse IA..." class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                 </div>

                <!-- CORRECTED: Portfolio Companies Table - Now functional -->
                <div class="portfolio-table-container">
                    <div class="portfolio-table-header">
                        <div class="portfolio-header-cell company-column" data-sort="name">
                            Société/Fonds
                            <span class="sort-indicator"></span>
                        </div>
                        <div class="portfolio-header-cell ai-level-column" data-sort="aiLevel">
                            Niveau IA
                            <span class="sort-indicator"></span>
                        </div>
                        <div class="portfolio-header-cell ai-analysis-column" data-sort="aiAnalysis">
                            Analyse & Liens IA
                            <span class="sort-indicator"></span>
                        </div>
                    </div>
                    <div id="portfolioTableBody">
                        <!-- FIXED: Portfolio companies will be populated by JavaScript - no longer empty -->
                    </div>
                </div>
            </section>

            <!-- FIXED: AI Impact Charts - Now functional -->
            <div class="grid grid-cols-1 xl:grid-cols-1 gap-6 lg:gap-8 mt-8">
                <section class="chart-container">
                    <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-4">Répartition par Niveau d'Exposition IA</h2>
                    <div class="chart-wrapper">
                        <canvas id="aiExposureChart" width="400" height="250"></canvas>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <script src="data.js"></script>
    <script src="charts.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>
